# =========================================================
# =============== PLANNING-SERVICE (Docker / Local) ============
# =========================================================

spring.application.name=planning-service
server.port=${SERVER_PORT:8083}

# =========================================================
# =============== CONSUL CONFIGURATION =====================
# =========================================================
spring.cloud.consul.host=${CONSUL_HOST:localhost}
spring.cloud.consul.port=${CONSUL_PORT:8500}

# =========================================================
# =============== DATABASE CONFIGURATION ==================
# =========================================================
# R2DBC pour la connexion r�active
spring.r2dbc.url=${SPRING_R2DBC_URL:r2dbc:postgresql://localhost:5432/planning_db}
spring.r2dbc.username=${SPRING_R2DBC_USERNAME:admin}
spring.r2dbc.password=${SPRING_R2DBC_PASSWORD:admin}
spring.r2dbc.pool.initial-size=${SPRING_R2DBC_POOL_INITIAL_SIZE:2}
spring.r2dbc.pool.max-size=${SPRING_R2DBC_POOL_MAX_SIZE:10}

# =========================================================
# =============== FLYWAY CONFIGURATION =====================
# =========================================================
spring.flyway.enabled=${SPRING_FLYWAY_ENABLED:true}
spring.flyway.url=${SPRING_FLYWAY_URL:jdbc:postgresql://localhost:5432/planning_db}
spring.flyway.user=${SPRING_FLYWAY_USER:admin}
spring.flyway.password=${SPRING_FLYWAY_PASSWORD:admin}
spring.flyway.locations=${SPRING_FLYWAY_LOCATIONS:classpath:db/migration}
# Exécuter seulement les nouvelles migrations
spring.flyway.baseline-on-migrate=${SPRING_FLYWAY_BASELINE_ON_MIGRATE:true}
spring.flyway.baseline-version=${SPRING_FLYWAY_BASELINE_VERSION:1}
# Ne jamais nettoyer la base automatiquement
spring.flyway.clean-disabled=${SPRING_FLYWAY_CLEAN_DISABLED:true}
spring.flyway.clean-on-startup=${SPRING_FLYWAY_CLEAN_ON_STARTUP:false}
# Comportement de validation
spring.flyway.validate-on-migrate=${SPRING_FLYWAY_VALIDATE_ON_MIGRATE:true}
spring.flyway.out-of-order=${SPRING_FLYWAY_OUT_OF_ORDER:false}


# =========================================================
# =============== JPA (D�sactiv� car R2DBC) ================
# =========================================================
spring.data.jpa.repositories.enabled=false

# =========================================================
# =============== LOGGING CONFIGURATION ====================
# =========================================================
logging.level.org.flywaydb=${LOG_FLYWAY_LEVEL:DEBUG}
logging.level.io.r2dbc.postgresql=${LOG_R2DBC_LEVEL:DEBUG}
logging.level.org.springframework.r2dbc=${LOG_SPRING_R2DBC_LEVEL:DEBUG}
logging.level.com.architecte=${LOG_APP_LEVEL:DEBUG}








