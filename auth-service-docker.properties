# =========================================================
# =============== AUTH-SERVICE (Docker) ===================
# =========================================================

spring.application.name=auth-service
server.port=8081

# =========================================================
# =============== CONSUL CONFIGURATION ====================
# =========================================================
spring.cloud.consul.host=consul
spring.cloud.consul.port=8500

# =========================================================
# =============== DATABASE CONFIGURATION ==================
# =========================================================
# R2DBC pour la connexion réactive
spring.r2dbc.url=r2dbc:postgresql://auth-db:5432/auth_db
spring.r2dbc.username=admin
spring.r2dbc.password=admin
spring.r2dbc.pool.initial-size=2
spring.r2dbc.pool.max-size=10

# =========================================================
# =============== FLYWAY CONFIGURATION ====================
# =========================================================
spring.flyway.enabled=true
spring.flyway.url=jdbc:postgresql://auth-db:5432/auth_db
spring.flyway.user=admin
spring.flyway.password=admin
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=1
spring.flyway.clean-disabled=false
spring.flyway.clean-on-startup=true
spring.flyway.validate-on-migrate=false
spring.flyway.out-of-order=true

# =========================================================
# =============== JPA (Désactivé car R2DBC) ===============
# =========================================================
spring.data.jpa.repositories.enabled=false

# =========================================================
# =============== LOGGING CONFIGURATION ===================
# =========================================================
logging.level.org.flywaydb=DEBUG
logging.level.io.r2dbc.postgresql=DEBUG
logging.level.org.springframework.r2dbc=DEBUG
logging.level.com.architecte=DEBUG

# ========== JWT CONFIGURATION ==========
jwt.secret=w7/9b0+2Jv1rE6QkZ1M3iG1D4oXQ5WvK+Lq8cT9yR2g=
jwt.expiration=600000000
jwt.refresh.expiration=30000000000

# ========== SERVICE DISCOVERY ==========
spring.cloud.consul.discovery.enabled=true
spring.cloud.consul.discovery.service-name=auth-service
spring.cloud.consul.discovery.register=true
spring.cloud.consul.discovery.health-check-path=/actuator/health
spring.cloud.consul.discovery.health-check-interval=15s